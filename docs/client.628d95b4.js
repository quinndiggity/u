parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"2Avy":[function(require,module,exports) {
e=function(n,t){for(var r=0;r<n.length;r++)t(n[r],r)},e2=function(n,t){for(var r=0;r<n.length;r+=2)t(n[r],n[r+1],r/2)},iso=function(n){return"[object Object]"==Object.prototype.toString.call(n)},iss=function(n){return"string"==typeof n},isf=function(n){return"function"==typeof n},isa=Array.isArray,isi=Number.isInteger,isn=function(n){return!isNaN(n)},isu=function(n){return void 0===n};
},{}],"wQzv":[function(require,module,exports) {
parse=function(t){return parse_array(parse_string(t))},parse_string=function(t){function n(){var t;stoken&&aflat.push(stoken),stoken="",(t=aflat).push.apply(t,arguments)}return aflat=[],stoken="",inComment=!1,inBrackets=0,e(t,function(t){inComment?/\r|\n/.test(t)&&(inComment=!1):"~"==t?inComment=!0:/\(|\[|\{/.test(t)?(n("["),inBrackets++,"["==t&&n("_a"),"{"==t&&n("_o")):/\)|\]|\}/.test(t)?(n("]"),inBrackets--):/\s/.test(t)?n():inBrackets&&(stoken+=t)}),n(),aflat},parse_array=function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return stoken=t.shift(),stoken?"]"==stoken?n:("["==stoken?n.push(parse_array(t)):n.push(stoken),parse_array(t,n)):n});
},{}],"nL6R":[function(require,module,exports) {
var n=function(){return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,t){var r=[],i=!0,e=!1,u=void 0;try{for(var o,f=n[Symbol.iterator]();!(i=(o=f.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(n){e=!0,u=n}finally{try{!i&&f.return&&f.return()}finally{if(e)throw u}}return r}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function t(n){return Array.isArray(n)?n:Array.from(n)}function r(n,t,r){for(var i=[],e=_raw.as(t,r);e.length>1&&!isa(e[0]);)i.push(e.shift());return[r,n,i,e]}_raw={l:function(n,t){e(n,function(n){return console.log(n,":",i_exp(n,t))})},f:function(n,t){return r("all",n,t)},fn:function(n,t){return r("none",n,t)},fo:function(n,t){return r("odd",n,t)},fj:function(t,i){var u=r("all",t,i),o=n(u,4),f=o[0],c=(o[1],o[2]),s=o[3];return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return e(c,function(n,r){return f[n]=t[r]}),i_exps(s,f)}},fv:function(n,t){return r("all",n,envRoot.views)},fm:function(n,t){return n.unshift("m"),r("all",[n[1],n],t)},_a:function(n,t){return n.map(function(n){return i_exp(n,t)})},as:function(n){function t(t,r){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(n,t){return n.map(function(n){return isa(n)?_raw.as(n):n})}),_o:function(n,t){var r=Object.create(null);return e2(n,function(n,i){x1=","==n[0]?i_str(n.slice(1),t):n,r[x1]=i_exp(i,t)}),r},os:function(n){var t=Object.create(null);return e2(n,function(n,r){return t[n]=r}),t},g:function(n,t){return n.reduce(function(n,r){return n[i_str(r,t)]},i_str(n.shift(),t))},s:function(n,t){e2(n,function(n,r){iss(n)&&enviroment.set(n,t,i_exp(r,t))})},s_obj:function(n,r){var i=t(n),e=i[0],u=i.slice(1);e=i_exp(e,r),e2(u,function(n,t){return e[n]=i_exp(t,r)})},s_root:function(n,t){e2(n,function(n,r){return enviroment.set(i_exp(n,t),envRoot,i_exp(r,t))})},"s+":function(t,r){var i=n(t,2),e=i[0],u=i[1];enviroment.set(e,r,i_exp(e,r)+i_exp(u,r))},let:function(n,t){e2(n,function(n,r){enviroment.let(n,t,i_exp(r,t))})},m:function(n,r){var e=t(n),u=e[0],o=e.slice(1);for(xs=i_exp(u,r),matched=!1,i=0;i<o.length;i+=2)if(xc=i_exp(o[i],r),!0===xc?matched=1:isf(xc)&&!0===xc(xs)?matched=1:xc===xs&&(matched=1),matched)return as=o[i+1],isa(as)?i_arr(as,r):i_str(as,r)},if:function(n,t){return t.$=i_exp(n.shift(),t),t.$?i_exp(n[0],t):n.length>1?i_exps(n.slice(1),t):void 0},ifn:function(n,t){return t.$=i_exp(n.shift(),t),t.$?n.length>1?i_exps(n.slice(1),t):void 0:i_exp(n[0],t)},ifd:function(n,t){if(t.$=i_exp(n.shift(),t),t.$)return i_exps(n,t)},ifu:function(n,t){return t.$=i_exp(n.shift(),t),void 0===t.$?i_exp(n[0],t):n.length>1?i_exps(n.slice(1),t):void 0},do:function(n,t){return i_exps(n,t)},for:function(n,r){for(var i=t(n),e=i[0],u=i.slice(1),o={_env:r},f=0;f<i_exp(e,r);f++){o.$=f;var c=i_exps(u,o);if(iss(c)&&"⏎⏎"==c)return}},str:function(n,t){return n.map(function(n){return","==n[0]?i_str(n.slice(1),t):n}).join(" ")}};
},{}],"xhQa":[function(require,module,exports) {
_escapeChar={t:"\t",n:"\n",s:" ",p:"(",q:")",b:"[",d:"]"},_prefix={"|":function(n){return _escapeChar[n]},"'":function(n){return n},"!":function(n,e){return!i_str(n,e)},"-":function(n,e){return-i_str(n,e)},":":function(n){return n?new Date(n):new Date},"/":function(n){return i_2=n.length-2,"/"==n[i_2]?new RegExp(n.slice(0,i_2),n[i_2+1]):new RegExp(n)}};
},{}],"dyYG":[function(require,module,exports) {
_assign={all:function(n,t,i,f){for(;n.length&&t.length;)i[n.shift()]=i_exp(t.shift(),f);var h=t.length;if(h>1&&(i.$=t.map(function(n){return i_exp(n,f)})),1==h){var o=i_exp(t[0],f);iso(o)?e(Object.keys(o),function(n){return i[n]=o[n]}):i.$=o}},none:function(n,t,i){for(;n.length&&t.length;)i[n.shift()]=t.shift();t.length&&(i.$=t.map(function(n){return n}))},odd:function(n,t,i,e){e2(n,function(n,f){i[n]=t.shift(),i[f]=i_exp(t.shift(),e)}),t.length&&(i.$=t.map(function(n,t){return 1&t?i_exp(n,e):n}))}};
},{}],"3jVx":[function(require,module,exports) {
var global = arguments[3];
var n=arguments[3];function r(n){if(Array.isArray(n)){for(var r=0,t=Array(n.length);r<n.length;r++)t[r]=n[r];return t}return Array.from(n)}envRoot={require:require,isf:isf,iss:iss,isa:isa,iso:iso,isn:isn,isi:isi,is_root_dir:function(n){return"~"==n[0]||"/"==n[0]||":"==n[1]},js:n||window,log:console.log,keys:Object.keys,true:!0,false:!1,undefined:void 0,null:null,return:"⏎⏎","+":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return isa(r[0])&&(r=r[0]),null==r[0]?"":r.reduce(function(n,r){return n+r})},"-":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n-r})},"*":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n*r})},"÷":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n/r})},"%":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n%r})},"&":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n&&r})},"|":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n||r})},or:function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n||r})},"^":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return n.slice(r)})},"=":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];for(i=r.length;--i&&r[0]===r[i];);return!(i>0)},"!=":function(){var n;return!(n=envRoot)["="].apply(n,arguments)},"≠":function(){var n;return!(n=envRoot)["="].apply(n,arguments)},"<":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];for(i=r.length;--i&&r[i]>r[i-1];);return 0==i},">=":function(){var n;return!(n=envRoot)["<"].apply(n,arguments)},"≥":function(){var n;return!(n=envRoot)["<"].apply(n,arguments)},">":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];for(i=r.length;--i&&r[i]<r[i-1];);return 0==i},"<=":function(){var n;return!(n=envRoot)[">"].apply(n,arguments)},"≤":function(){var n;return!(n=envRoot)[">"].apply(n,arguments)},"!":function(n){return!n},"/":function(){for(var n=arguments.length,r=Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce(function(n,r){return isn(r)?n[r]:r?r.split(".").reduce(function(n,r){return n?n[r]:void 0},n):void 0})},JSONparse:function(n){try{return JSON.parse(n)}catch(n){return!1}},lowercase:function(n){return n.toLowerCase()},split:function(n,r){return n.split(r)},delete:function(n){for(var r=arguments.length,t=Array(r>1?r-1:0),u=1;u<r;u++)t[u-1]=arguments[u];e(t,function(r){return delete n[r]})},merge:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce(function(n,t){return[].concat(r(n),r(t))})},clone:function(n){return JSON.parse(JSON.stringify(n))},assign:function(n,r){return Object.assign(r||{},n)},has:function(n,r,t){return r.indexOf(n,t)+1},indexFo:function(n,r,t){return r.lastIndexOf(n,t)},indexOf:function(n,r,t){return r.indexOf(n,t)},pp:function(n,r){return r.unshift(n),r},push:function(n,r){return r.push(n),r},pop:function(n){return n.pop()},join:function(n,r){return r.join(n)},slice:function(n,r,t){return n.slice(r,t)},splice:function(n,r,t,e){if(isa(n))return void 0===e?n.splice(r,t):n.splice(r,t,e),n;var u=n.split("");return u.splice(r,t,e),u.join("")},renderHTML:function(n,r){document.getElementById(r||"app").innerHTML=n},byid:function(n){return document.getElementById(n)},focus_textarea:function(){document.getElementById("textarea").focus()},blur:function(){document.activeElement.blur()},addEventListener:function(n,r,t){n.addEventListener(r,t)},GET:function(n,r){fetch(n,{method:"GET"}).then(function(n){return n.json()}).then(r)},POST:function(n,r){fetch("post",{method:"POST",body:JSON.stringify(n)}).then(function(n){return n.json()}).then(r)}},envRoot._this=envRoot;
},{}],"2kmE":[function(require,module,exports) {
enviroment={parse:function(e,n){function r(e){keys.unshift(e?enviroment.resolve([prop],n)[prop]:prop),prop=""}for(keys=[],prop="",len=e.length;len>0;len--){var o=e[len-1];"."==o?r():","==o?r(!0):prop=o+prop}return r(),keys},lookup:function(e,n){for(var r=n;r&&void 0===r[e];)r=r._env;return r||n},new:function(e){var n=Object.create(null);return n._env=e,n},resolve:function(n,r){var o=void 0;return e(n,function(e){o=enviroment.lookup(e,r),r=o[e]}),o},get:function(e,n){var r=enviroment.parse(e,n);return enviroment.resolve(r,n)[r.pop()]},let:function(e,n,r){for(var o=enviroment.parse(e,n);o.length>1;)n=n[o.shift()];return n[o[0]]=r},set:function(e,n,r){var o=enviroment.parse(e,n);return enviroment.resolve(o,n)[o.pop()]=r}};
},{}],"WWHz":[function(require,module,exports) {
var r=function(){return function(r,i){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,i){var n=[],e=!0,t=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(e=(o=u.next()).done)&&(n.push(o.value),!i||n.length!==i);e=!0);}catch(r){t=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(t)throw a}}return n}(r,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function i(r){if(Array.isArray(r)){for(var i=0,n=Array(r.length);i<r.length;i++)n[i]=r[i];return n}return Array.from(r)}function n(r){return Array.isArray(r)?r:Array.from(r)}i_text=function(r){return i_exps(parse(r),envRoot)},i_exps=function(r,i){for(var n=void 0,e=0;e<r.length;e++){var t=r[e];if(iss(t))return i_exp(t,i);if(isa(t)&&(n=i_exp(t,i)),"⏎⏎"===n)return"⏎⏎"}return n},i_exp=function(r,i){return iss(r)?i_str(r,i):isa(r)?i_arr(r,i):void console.log("i_exp",r)},i_str=function(r,i){return isNaN(r)?(f=_prefix[r[0]])?f(r.slice(1),i):r.length>2&&null!=(ret=i_infix(r,i))?ret:enviroment.get(r,i):Number(r)},_reInfix=/[\-+*÷%=≠<>≤≥&|^\/]/,i_infix=function(r,i){var n=r.match(_reInfix);if(n){var e=n.index,t=i_str(r.slice(0,e),i),a=i_str(r.slice(e+1),i);return envRoot[n[0]](t,a)}},i_arr=function(r,e){var t=n(r),a=t[0],o=t.slice(1),u=_raw[a];return u?u(o,e):!0===(a=i_exp(a,e))?i_exp(o[0],e):!1===a?i_exp(o.slice(1),e):isf(a)?a.apply(void 0,i(o.map(function(r){return i_exp(r,e)}))):isa(a)?i_args(o,a,e):void 0},i_args=function(i,n,e){var t=r(n,4),a=t[0],o=t[1],u=t[2],f=t[3],s={_env:a};return _assign[o](u.slice(0),i,s,e),i_exps(f,s)};
},{}],"Y5Mt":[function(require,module,exports) {
require("./util"),require("./parse"),require("./_raw"),require("./_prefix"),require("./_assign"),require("./envRoot"),require("./enviroment"),require("./interpret");
},{"./util":"2Avy","./parse":"wQzv","./_raw":"nL6R","./_prefix":"xhQa","./_assign":"dyYG","./envRoot":"3jVx","./enviroment":"2kmE","./interpret":"WWHz"}],"Ur0s":[function(require,module,exports) {
i_text("(s\neach (f seq exp (m seq\n  iso (do\n    (s ak (keys seq))\n    (for ak.length\n      (s key ak,$)\n      (exp seq,key key)))\n  true (for seq.length (exp seq,$ $))\n))\nreduce (f ret seq exp\n  (each seq (f val key\n    (s ret (exp ret val key))\n  ))\n  ret\n)\nmap (f seq exp (m seq\n  isa (do\n    (s ret [])\n    (for seq.length (push (exp seq,$ $) ret))\n    ret\n  )\n  iso (do\n    (s ret {} ak (keys seq))\n    (for ak.length (s key ak,$ ret,key (exp seq,key key)))\n    ret\n  )\n))\nfilter (f seq exp (m seq\n  isa\n  (reduce [] seq (f ret val key\n    (if (exp val key) (push val ret))\n    ret\n  ))\n  iso\n  (reduce {} seq (f ret val key\n    (if (exp val key) (s ret,key val))\n    ret\n  ))\n))\nfuzzy_filter (f queryText arr\n  (ifn queryText (map arr (f v k {id k name v}))\n    (let ret [])\n    (each arr (f val key\n      (s index 0)\n      (for queryText.length\n        (s index (has queryText,$ val index))\n        (ifn index return)\n      )\n      (if index (push {name val id key} ret))\n    ))\n    ret\n  )\n)\n)");
},{}],"O9lv":[function(require,module,exports) {
i_text("(s\nset (f obj changes\n  (ifu changes obj\n    (assign\n      (map changes (f x key\n        (let val obj,key)\n        (ifu x val\n          (if (isa x)\n            (if x.1='all (x val)\n              (if x.0.1='all (x.0 val x.1 x.2 x.3 x.4) x))\n          x)\n        )\n      ))\n    obj)\n  )\n)\ninc (f n n+1)\ndec (f n n-1)\nadd (f n x n+x)\nsub (f n x n-x)\ninsert (f arr x n (splice arr n 0 x) )\nremove (f arr n (splice arr n 1) )\n)");
},{}],"AdRN":[function(require,module,exports) {
i_text("(s\nprop (f key obj\n  (if obj,key $ key)\n)\nlast (f arr\n  (g arr arr.length-1)\n)\ntake (f keys seq\n  (s ret (m seq isa [] iso {}))\n  (each keys (f key (ifu seq,key 0\n    (s ret,key seq,key)\n    (delete seq key)\n  )))\n  ret\n)\nall_keys (f obj ret parentKey\n  (ifu ret (s ret []))\n  (each obj (f val key\n    (s fullKey (if parentKey (+ parentKey '. key) key ))\n    (if (iso val)\n      (all_keys val ret fullKey)\n      (push fullKey ret)\n    )\n  ))\n  ret\n)\n)");
},{}],"hfVx":[function(require,module,exports) {
require("./seq.u"),require("./set.u"),require("./get.u");
},{"./seq.u":"Ur0s","./set.u":"O9lv","./get.u":"AdRN"}],"o49q":[function(require,module,exports) {
i_text("(s\ncss {\n  theme {\n    px 1 bs 'solid bw 1\n    s0 12 s1 16 s2 20 s3 24\n    c0 '#2b303b c1 '#bf616a c2 '#a3be8c c3 '#ebcb8b\n    c4 '#8fa1b3 c5 '#b48ead c6 '#96b5b4 c7 '#c0c5ce\n    c8 '#373B41 c9 '#f2777a ca '#99cc99 cb '#ffcc66\n    cc '#6699cc cd '#cc99cc ce '#66cccc cf '#f2f0ec\n  }\n  abbr (os\n    b background\n    bs border-style\n    bw border-width\n    bc border-color\n    c color\n    d display\n    f font-size\n    m margin\n    mt margin-top\n    mb margin-bottom\n    ml margin-left\n    mr margin-right\n    pos position\n    p padding\n    pl padding-left\n    pr padding-right\n    pt padding-top\n    pb padding-bottom\n    h height\n    hn min-height\n    hx max-height\n    w width\n    wn min-width\n    wx max-width\n    ta text-align\n  )\n}\nhtml {\n  attr (as href src id class title)\n  g_str (f tag oAttr oStyle innerHtml\n    (s sAttr (reduce ' oAttr (f ret val key (+ ret key '=\" val '\" |s)))\n       sStyle (reduce ' oStyle (f ret val key\n                (ifu val ret\n                  (s cssKey (prop key css.abbr)\n                      cssVal (prop val css.theme))\n                  (if (isn cssVal)\n                      (s cssVal (+ cssVal*css.theme.px 'px)))\n                  (if cssVal.0=',\n                      (s cssVal cssVal^1))\n                  (+ ret cssKey ': cssVal ';)\n                )\n       ))\n       sStyle (if sStyle (+ 'style=\" sStyle '\") ')\n    )\n    (+ '< tag |s sAttr sStyle '> innerHtml '</ tag '>)\n  )\n  g_node (f obj\n    (s tag (ifu obj.tag 'div $)\n       innerHtml (ifu obj.i ' $)\n       oStyle (assign obj)\n       oAttr (take html.attr oStyle)\n    )\n    (delete oStyle 'tag 'i)\n    (html.g_str tag oAttr oStyle innerHtml)\n  )\n  g_tree (fm tree\n    isa (do\n      (if (iso tree.0) (s node (assign tree.0) i 1))\n      (if (iss tree.0) (s class tree.0 i 1 node {}))\n      (if (iss tree.1) (s class tree.1 i 2))\n      (if class (s node.class (join |s (split class ',))))\n      (s node.i (+ (map tree^i html.g_tree)))\n      (html.g_node node)\n    )\n    iso (html.g_node tree)\n    true '\n  )\n}\n)");
},{}],"HZtX":[function(require,module,exports) {
i_text("(s\nroot {\n  nmap (os\n    i insert_mode\n    o indexPalette\n    b basePalette\n    h go_last\n    j cursor_up\n    k cursor_down\n    l go_child\n    Enter go_child\n    Backspace rm_index\n    ArrowLeft go_last\n    ArrowRight go_child\n    ArrowUp cursor_up\n    ArrowDown cursor_down\n  )\n  imap (os\n    Escape normal_mode\n    Backspace rm_left\n    mBackspace rm_line_start\n    aBackspace rm_prev_space\n    Delete rm_right\n    ArrowLeft cursor_left\n    ArrowRight cursor_right\n    ArrowUp cursor_up\n    ArrowDown cursor_down\n    aArrowLeft prev_space\n    aArrowRight next_space\n    mArrowLeft line_start\n    mArrowRight line_end\n    mArrowUp line_top\n    mArrowDown line_bottom\n    Enter new_line\n    mz undo\n    msz redo\n  )\n  normal_mode (f {imap 0})\n  insert_mode (f {imap 1})\n  basePalette (f\n    ['baseP ']\n  )\n  indexPalette (f\n    ['indexP ']\n  )\n}\n)");
},{}],"SiNV":[function(require,module,exports) {
i_text("(s\njs.onkeydown (fj e\n  (if (has e.key (as Alt Control Meta Shift)) return)\n  (ifd (or !app,focus.imap\n          (or e.altKey e.ctrlKey e.metaKey)\n          (has e.key (as Backspace Delete Enter Escape ArrowLeft ArrowRight ArrowUp ArrowDown))\n      )\n      (s cmd (abbr2cmd (event2abbr e)))\n      (if cmd (set_app (cmd app,focus)))\n      (s fuckKeyup true)\n  )\n)\nabbr2cmd (f abbr\n  (l abbr)\n  (let af app,focus\n       kmap (if af.imap 'imap 'nmap)\n       localmap af.c,kmap\n       localname (if localmap localmap,abbr)\n       cmdName (or localname root,kmap,abbr)\n  )\n  (if cmdName (or af.c,cmdName root,cmdName))\n)\nabbrMap (os acms H cms A ams C acs M acm S)\nevent2abbr (f e\n  (s abbr ')\n  (if e.altKey (s+ abbr 'a))\n  (if e.ctrlKey (s+ abbr 'c))\n  (if e.metaKey (s+ abbr 'm))\n  (if e.shiftKey (s+ abbr 's))\n  (+ (prop abbr abbrMap)\n     (if e.code.0='K (lowercase e.code.3) e.code)\n  )\n)\ntextarea (byid 'textarea)\ntextarea.onkeyup (fj e\n  (if fuckKeyup (s fuckKeyup false)\n    (if fuckChromeIME (s fuckChromeIME false)\n      (s val textarea.value)\n      (if (& val val≠|n)\n        (set_app (app,focus.c.input val app,focus))\n      )\n    )\n  )\n  (s textarea.value ')\n)\n)\n(addEventListener textarea 'compositionupdate (fj e\n  (s fuckChromeIME true)\n))\n");
},{}],"dAvU":[function(require,module,exports) {
document.addEventListener("keydown",function(e){if("`"===e.key){var t=document.body;(t.mozRequestFullScreen||t.webkitRequestFullscreen||t.requestFullscreen).bind(t)()}"Tab"==e.key&&e.preventDefault()}),hiddenWrap=document.getElementById("hidden"),document.getElementById("textarea").addEventListener("keydown",function(e){var t=document.getElementById("cursor");if(t){var n=t.getBoundingClientRect();hiddenWrap.style.left=n.left+"px",hiddenWrap.style.top=n.top+"px"}}),document.addEventListener("paste",function(e){clip=e.clipboardData,text=clip.getData("text/plain"),paste_text=envRoot.app[envRoot.focus].c.paste_text,paste_text&&paste_text(text)});
},{}],"O5aE":[function(require,module,exports) {
i_text("(s\napp []\nfocus 0\nbase 'preset\nrender_app (f\n  (let childs (map app\n          (f s i\n            (let v (s.c.view s))\n            (if s.layout (views.fixed s.layout v) v)\n          )\n       )\n       wrap {b 'c0 c 'cf h '100% line-height 24}\n  )\n  (renderHTML (html.g_tree (pp wrap childs)))\n)\njs.onresize (fj (render_app))\nadd_app (f cname data id\n  (s af (components,cname.init data)\n     af.lastFocus focus\n     af.c components,cname\n     af.history []\n     focus (ifu id app.length id)\n     app,focus af\n  )\n)\nset_app (f x\n  (if (isi x) (rm_app x)\n    (if (isa x) (add_app x.0 x.1 x.2))\n    (let af app,focus)\n    (if (iso x) (set af x))\n    (if af.c.after (set af (af.c.after af)))\n    (if af.history (push (assign af) af.history))\n    (save_base af)\n  )\n  (if app,focus.imap (focus_textarea) (blur))\n  (render_app)\n)\nrm_app (f id\n  (s focus app,id.lastFocus)\n  (remove app id)\n)\n)");
},{}],"2Yqf":[function(require,module,exports) {
i_text("(s\nconnected js.location.host='localhost:3434\nsave_base (f state\n  (ifd base≠'preset\n    (let dn state.dn)\n    (if dn (if (is_root_dir base)\n               (if connected (save_dir base d,base))\n             (save_storage base d,base)\n    ))\n  )\n)\nsave_dir (f dirname db\n  (POST ['save_dir dirname db] (fj res (l res)))\n)\nsave_storage (f key data\n  (s js.localStorage,key (js.JSON.stringify data))\n)\nload_storage (f key\n  (JSONparse js.localStorage,key)\n)\nload_dir (f dirname\n  (POST ['load_dir dirname] (fj data\n    (if (isa data) (s d,dirname data))\n  ))\n)\nload_base (f base\n  (ifd base≠'preset\n    (if (is_root_dir base)\n        (if connected (load_dir base))\n      (let db (load_storage base))\n      (if (isa db) (s d,base db))\n    )\n  )\n)\nload_bases (f\n  (let bases (load_storage '_bases))\n  (each bases load_base)\n)\n)");
},{}],"DW4R":[function(require,module,exports) {
require("./html.u"),require("./root.u"),require("./onkey.u"),require("./onkey"),require("./app.u"),require("./persist.u");
},{"./html.u":"o49q","./root.u":"HZtX","./onkey.u":"SiNV","./onkey":"dAvU","./app.u":"O5aE","./persist.u":"2Yqf"}],"H4mP":[function(require,module,exports) {
i_text("(s_obj views\ncenter {d 'flex align-items 'center justify-content 'center h '100%}\nrow {d 'flex h '100% align-items 'center}\ncol {d 'flex flex-direction 'column}\nfixed (f o child [{\n  position 'fixed\n  left (+ o.x*10 '%)\n  top (+ o.y*10 '%)\n  w (if o.w (+ o.w*10 '%) (+ child.w*10 '%))\n  h (if o.h (+ o.h*10 '%) (+ child.h*10 '%))\n  wx (if o.wx (+ o.wx*10 '%) (+ child.wx*10 '%))\n  hx (if o.hx (+ o.hx*10 '%) (+ child.hx*10 '%))\n} child])\ngrid (fv layout childs\n  (pp {pos 'relative h '100%}\n      (map layout (f o i (fixed o childs,i) ))\n  )\n)\n)");
},{}],"SVV+":[function(require,module,exports) {
i_text("(s_obj views\ncursor {\n  id 'cursor h '80% w 2 b 'cc position 'absolute\n}\ntext (f text h color\n  (s h h|28)\n  {tag 'div white-space 'pre i text c color margin 0 h h line-height h}\n)\ninput (fv sText caret h\n  [row\n    (text (slice sText 0 caret) h)\n    [row 'relative cursor (text sText^caret h)]\n  ]\n)\n)");
},{}],"93Mo":[function(require,module,exports) {
i_text("(s_obj views\nselect (fv highlight list\n  (map list (f item i\n    (let color (if highlight=i 'cc))\n    (text item.name 30 color)\n  ))\n)\n\n)");
},{}],"3Z/r":[function(require,module,exports) {
envRoot.views={_env:envRoot},require("./layout.u"),require("./text.u"),require("./list.u");
},{"./layout.u":"H4mP","./text.u":"SVV+","./list.u":"93Mo"}],"19T+":[function(require,module,exports) {
i_text("(s components.outIndex {\n  init (f x\n    (let db d,base)\n    (if (isi x) {\n        id x\n        dn db,x\n        index 0\n        caret db,x.0.length\n        imap 0\n      }\n      (if x.id (let id x.id)\n        (let id db.length)\n        (push [x.name '] db)\n      )\n      {id id dn db,id index 1 caret 0 imap 0 last (assign x.last)}\n    )\n  )\n  view (fv\n    (l dn index imap)\n    [center 'scroll\n      (pp {}\n        (map dn (f line i\n          (if i=0 [{transform (+ 'translateX |p '-16px |q)}\n                   (ifn index (if imap (input line caret)\n                                       [{c 'cc} (text line)])\n                              (text line) )]\n            (if (isi line) (if i=index (if imap\n                                           [{c 'cc} (input d,base,line.0 caret)]\n                                         [{c 'cc} (text (str ,d,base,line.0 →))] )\n                           (text (str ,d,base,line.0 →)) )\n                (if i=index (if imap (input line caret)\n                                     [{c 'cc} (text line)])\n                            (text line) )\n            )\n          )\n        ))\n      )\n    ]\n  )\n  input (f v\n    (s dn,index (splice dn,index caret 0 v))\n    {caret [add v.length]}\n  )\n  rm_index (f\n    (ifd index\n      (let i index-1)\n      {dn [remove index] index i caret dn,i.length}\n    )\n  )\n  rm_left (f\n    (let line dn,index)\n    (ifd (isi line)\n      (let i index-1)\n      {dn [remove index] index i caret dn,i.length}\n      return\n    )\n    (ifn caret (ifd (& index line.length=0)\n        (let i index-1)\n        {dn [remove index] index i caret dn,i.length}\n      )\n      (s dn,index (remove line caret-1))\n      {caret dec}\n    )\n  )\n  rm_right (f\n    (let c caret i index)\n    (if c<dn,i.length (s dn,i (remove dn,i c)))\n  )\n  cursor_left (f\n    (if caret {caret dec})\n  )\n  cursor_right (f\n    (let i dn,index)\n    (if (isi i) ['outIndex {id i last app,focus} focus]\n      (if caret<i.length {caret inc})\n    )\n  )\n  cursor_up (f\n    (let prev dn/index-1)\n    (if index {\n      index dec\n      caret (if prev.length<caret prev.length)\n    })\n  )\n  cursor_down (f\n    (let next dn/index+1)\n    (ifu next _ {\n      index inc\n      caret (if next.length<caret next.length)\n    })\n  )\n  new_line (f\n    (let x dn,index)\n    (if (isi x) {index inc caret 0 dn [insert ' index+1]}\n      (let old dn,index new old^caret)\n      (s dn,index (slice old 0 caret))\n      {index inc caret 0 dn [insert new index+1]}\n    )\n  )\n  prev_space (f\n    (let i (indexFo |s dn,index caret-1) )\n    {caret (if i+1 i 0)}\n  )\n  next_space (f\n    (let i (indexOf |s dn,index caret+1))\n    {caret (if i+1 i dn,index.length)}\n  )\n  line_start (f {caret 0} )\n  line_end (f {caret dn,index.length} )\n  line_top (f {caret dn.0.length index 0} )\n  line_bottom (f\n    (let i dn.length-1)\n    {caret dn,i.length index i}\n  )\n  rm_line_start (f\n    (s dn,index dn,index^caret)\n    {caret dn,index.length-1}\n  )\n  rm_prev_space (f\n    (let i (indexFo |s dn,index caret-1) )\n    (ifn i+1 (s i 0))\n    (s dn,index (splice dn,index i caret '))\n    {caret i}\n  )\n  paste_text (fj text\n    (let texts (split text |n)\n         c components.outIndex\n         af app,focus)\n    (each texts (f text i\n      (set_app (c.input text af))\n      (ifn texts=i (set_app (c.new_item af)))\n    ))\n  )\n  go_child (f\n    (let line dn,index af app,focus)\n    (ifn line&index return)\n    (if (isi line) ['outIndex {id line last af} focus]\n      (s dn,index d,base.length)\n      ['outIndex {name line last af} focus]\n    )\n  )\n  go_last (f\n    (if (isa last) return)\n    last\n  )\n  undo (f\n    (if history.length (pop history))\n  )\n})");
},{}],"Z3z1":[function(require,module,exports) {
i_text("(s components.Palette (f config {\n  confirm config.confirm\n  init (f str\n    (let list (config.init_list))\n    {\n      query str\n      index 0\n      caret 0\n      list list\n      matches (fuzzy_filter str list)\n      imap 1\n    }\n  )\n  after (f\n    (let m (fuzzy_filter query list))\n    {matches (if m.length m [{name (str Create: ,config.name ,query) noMatch true}])}\n  )\n  view (fv\n    (let iw js.innerWidth ih js.innerHeight\n         p {pos 'fixed b 'c0 bs 'bs bw 'bw bc 'cf overflow 'hidden}\n    )\n    (if iw>500\n      (s p.w 500 p.left (÷ iw-p.w 2))\n      (s p.w iw-2 p.left 1)\n    )\n    (if ih>500\n      (let p.h ih*6÷10 p.top (÷ ih-p.h 2) hx ih*5÷10)\n      (let p.h ih-20 p.top 10 hx ih-100)\n    )\n    [p\n      [ {p 12 h 32 border 0 border-bottom 1 bs 'bs bc 'cf}\n        (input query caret) ]\n      (pp {p 12 hx hx c overflow 'scroll}\n          (select index matches) )\n    ]\n  )\n  input (f v {\n    index 0\n    caret [add v.length]\n    query (splice query caret 0 v)\n  })\n  rm_left (f\n    (if caret {\n      query (remove query caret-1)\n      caret dec\n      index 0\n    })\n  )\n  rm_right (f\n    (if caret<query.length {\n      query (remove query caret)\n      index 0\n    })\n  )\n  cursor_left (f\n    (if caret {caret dec})\n  )\n  cursor_right (f\n    (if caret<query.length {caret inc})\n  )\n  cursor_up (f\n    (if index { index dec })\n  )\n  cursor_down (f\n    (if index<matches.length-1 { index inc })\n  )\n  cancel (f focus)\n  imap (os\n    Enter confirm\n    Escape cancel\n  )\n}))");
},{}],"sv1n":[function(require,module,exports) {
i_text("(s components.indexP (components.Palette {\n  name 'index\n  init_list (f (map d,base (f val val.0)))\n  confirm (f\n    (rm_app focus)\n    (let id matches,index.id)\n    (if id+1\n        ['outIndex id lastFocus]\n      ['outIndex {name query last app,lastFocus} lastFocus]\n    )\n  )\n}))");
},{}],"tYoB":[function(require,module,exports) {
i_text("(s components.baseP (components.Palette {\n  name 'base\n  init_list (f (keys d))\n  confirm (f\n    (let mi matches,index)\n    (ifn mi.noMatch\n         (s base mi.name app [])\n       (s base query app []\n          d,query [[(+ query |s 'root)]] )\n       (save_storage '_bases (keys d))\n    )\n    ['outIndex 0]\n  )\n}))");
},{}],"0tiM":[function(require,module,exports) {
envRoot.components={},require("./outIndex.u"),require("./Palette.u"),require("./indexP.u"),require("./baseP.u");
},{"./outIndex.u":"19T+","./Palette.u":"Z3z1","./indexP.u":"sv1n","./baseP.u":"tYoB"}],"r6mU":[function(require,module,exports) {
module.exports=[["just a buggy demo, not ready for use yet","use jk or ↑↓ to go up|down, l or → to go in",2,3,4],["te","soror","rororo","ororo"],["Basic keyboard shortcuts","i: enter insert mode","esc: enter normal mode","h: go back","o: go to ..","b: switch base","..."],["Why another language & editor?","","There are many intelligent programmers in the world,","who loathe OOP, prefer FP, love to use Lisp,","but have to use other languages for better ecosystem,",'and spent most their intelligence on fixing the "bad parts".',"","I believe their intelligence should spent on more valuable things,","if only there is a single best, fully customizable tool,","to let them focus on creating better products and solve real problems."],["Upcoming","a better nvALT+Orgmode for everyday writing","with full&efficient keyboard control","and possibly voice input",""]];
},{}],"DYs3":[function(require,module,exports) {
i_text("\n(load_bases)\n(set_app ['outIndex 0])\n");
},{}],"Focm":[function(require,module,exports) {
require("../js"),require("../functional"),require("../system"),require("../views"),require("../components"),envRoot.d={preset:require("../../preset/_all.json")},require("./init.u");
},{"../js":"Y5Mt","../functional":"hfVx","../system":"DW4R","../views":"3Z/r","../components":"0tiM","../../preset/_all.json":"r6mU","./init.u":"DYs3"}]},{},["Focm"], null)